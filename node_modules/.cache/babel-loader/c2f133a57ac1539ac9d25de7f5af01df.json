{"ast":null,"code":"import _defineProperty from \"C:\\\\Users\\\\Gohar\\\\Desktop\\\\testing-project\\\\testing-project\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"C:\\\\Users\\\\Gohar\\\\Desktop\\\\testing-project\\\\testing-project\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\Gohar\\\\Desktop\\\\testing-project\\\\testing-project\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\Gohar\\\\Desktop\\\\testing-project\\\\testing-project\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\Gohar\\\\Desktop\\\\testing-project\\\\testing-project\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\Gohar\\\\Desktop\\\\testing-project\\\\testing-project\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\Gohar\\\\Desktop\\\\testing-project\\\\testing-project\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nimport _taggedTemplateLiteral from \"C:\\\\Users\\\\Gohar\\\\Desktop\\\\testing-project\\\\testing-project\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"C:\\\\Users\\\\Gohar\\\\Desktop\\\\testing-project\\\\testing-project\\\\src\\\\components\\\\Autorization\\\\AutorizationCompany.js\";\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n    margin: 30px auto;\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { Component } from 'react';\nimport Login from \"./login/Login\";\nimport CompanyRegistration from \"./registration/CompanyRegistration\";\nimport * as firebase from \"firebase\";\nimport styled from 'styled-components';\nimport { Redirect } from \"react-router\";\nimport { connect } from 'react-redux';\nvar MarginDiv = styled.div(_templateObject());\n\nvar AutorizationCompany =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(AutorizationCompany, _Component);\n\n  function AutorizationCompany(props) {\n    var _this;\n\n    _classCallCheck(this, AutorizationCompany);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(AutorizationCompany).call(this, props));\n\n    _this.logOut = function () {\n      firebase.auth().signOut().then(function () {\n        localStorage.removeItem(\"current\");\n      }, function (error) {\n        console.error('Sign Out Error', error);\n      });\n    };\n\n    _this.changeHandler = _this.changeHandler.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.state = {\n      pass: '',\n      email: '',\n      remember: \"SESSION\",\n      showError: false,\n      errorMessage: \"\"\n    };\n    _this.remember = _this.remember.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(AutorizationCompany, [{\n    key: \"changeHandler\",\n    value: function changeHandler(e, field) {\n      this.setState(_defineProperty({}, field, e.target.value));\n    }\n  }, {\n    key: \"remember\",\n    value: function remember(event) {\n      this.setState({\n        remember: event.target.checked ? \"LOCAL\" : \"SESSION\"\n      });\n    }\n  }, {\n    key: \"checkWichUser\",\n    value: function checkWichUser(id) {\n      for (var i = 0; i < this.props.companies.length; i++) {\n        if (id === this.props.companies[i].id) {\n          this.currentLogName = 'company';\n          return 'company';\n        }\n      }\n\n      for (var _i = 0; _i < this.props.users.length; _i++) {\n        if (id === this.props.users[_i].id) {\n          this.currentLogName = 'user';\n          return 'user';\n        }\n      }\n\n      return false;\n    }\n  }, {\n    key: \"signIn\",\n    value: function signIn(e) {\n      var _this2 = this;\n\n      e.preventDefault();\n      var self = this;\n      firebase.auth().setPersistence(firebase.auth.Auth.Persistence[this.state.remember]).then(function () {\n        return firebase.auth().signInWithEmailAndPassword(self.state.email, self.state.pass);\n      }).then(function (user) {\n        if (self.checkWichUser(user.uid) === 'company') {\n          localStorage.setItem(\"current\", \"company\");\n        } else {\n          _this2.setState({\n            errorMessage: 'There is no such user please check your email and password'\n          });\n        }\n      }).catch(function (err) {\n        _this2.setState({\n          errorMessage: 'There is no such user please check your email and password'\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      console.log(this.state.errorMessage);\n      return React.createElement(MarginDiv, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, localStorage.getItem(\"current\") === \"company\" && this.props.user ? React.createElement(Redirect, {\n        to: \"/\".concat(this.props.user.name, \"/profile\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }) : React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, React.createElement(Login, {\n        login: this.state.pass,\n        email: this.state.email,\n        changeHandler: this.changeHandler,\n        signIn: this.signIn.bind(this),\n        errorMessage: this.state.errorMessage,\n        remember: this.remember,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }), React.createElement(CompanyRegistration, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return AutorizationCompany;\n}(Component);\n\nfunction mapStateToProps(state) {\n  return {\n    users: state.appReducer.users,\n    companies: state.appReducer.companies\n  };\n}\n\nexport default connect(mapStateToProps, null)(AutorizationCompany);","map":{"version":3,"sources":["C:\\Users\\Gohar\\Desktop\\testing-project\\testing-project\\src\\components\\Autorization\\AutorizationCompany.js"],"names":["React","Component","Login","CompanyRegistration","firebase","styled","Redirect","connect","MarginDiv","div","AutorizationCompany","props","logOut","auth","signOut","then","localStorage","removeItem","error","console","changeHandler","bind","state","pass","email","remember","showError","errorMessage","e","field","setState","target","value","event","checked","id","i","companies","length","currentLogName","users","preventDefault","self","setPersistence","Auth","Persistence","signInWithEmailAndPassword","user","checkWichUser","uid","setItem","catch","err","log","getItem","name","signIn","mapStateToProps","appReducer"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport Login from \"./login/Login\";\r\nimport CompanyRegistration from \"./registration/CompanyRegistration\";\r\nimport * as firebase from \"firebase\";\r\nimport styled from 'styled-components';\r\nimport {Redirect} from \"react-router\";\r\nimport { connect } from 'react-redux';\r\n\r\nconst MarginDiv = styled.div`\r\n    margin: 30px auto;\r\n`;\r\n\r\nclass AutorizationCompany extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.changeHandler = this.changeHandler.bind(this);\r\n\r\n        this.state = {\r\n            pass: '',\r\n            email: '',\r\n            remember: \"SESSION\",\r\n            showError: false,\r\n            errorMessage: \"\",\r\n        }\r\n\r\n        this.remember = this.remember.bind(this)\r\n    }\r\n\r\n    changeHandler(e, field) {\r\n        this.setState({\r\n            [field]: e.target.value,\r\n        })\r\n    }\r\n \r\n    remember(event){\r\n        this.setState({remember: event.target.checked ? \"LOCAL\" : \"SESSION\"})\r\n    }\r\n\r\n    checkWichUser (id) {\r\n        for (let i = 0; i < this.props.companies.length; i++) {\r\n            if (id === this.props.companies[i].id) {\r\n               this.currentLogName = 'company';\r\n                return 'company';\r\n            }\r\n        }\r\n        for (let i = 0; i < this.props.users.length; i++) {\r\n            if (id === this.props.users[i].id) {\r\n                this.currentLogName = 'user';\r\n                return 'user';\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n    logOut = () => {\r\n        firebase.auth().signOut().then(function () {\r\n            localStorage.removeItem(\"current\")\r\n        }, function (error) {\r\n            console.error('Sign Out Error', error);\r\n        });\r\n    };\r\n\r\n    signIn(e) {\r\n        e.preventDefault();\r\n        let self = this;\r\n        firebase.auth().setPersistence(firebase.auth.Auth.Persistence[this.state.remember])\r\n        .then(function() {\r\n        return firebase.auth().signInWithEmailAndPassword(self.state.email, self.state.pass);\r\n        })\r\n        .then(user => {\r\n            if (self.checkWichUser(user.uid) === 'company') {\r\n                localStorage.setItem(\"current\", \"company\");\r\n            } else {\r\n                this.setState({errorMessage: 'There is no such user please check your email and password'})\r\n               \r\n            }\r\n        })\r\n        .catch(err => {\r\n            this.setState({errorMessage: 'There is no such user please check your email and password'})\r\n        });\r\n    }\r\n\r\n    render() {\r\n        console.log(this.state.errorMessage);\r\n        return (\r\n           <MarginDiv>\r\n                {(localStorage.getItem(\"current\") === \"company\" && this.props.user) ?\r\n                     <Redirect to={`/${this.props.user.name}/profile`}/> \r\n                    :\r\n                      <div className='container'>\r\n                        <Login\r\n                            login={this.state.pass}\r\n                            email={this.state.email}\r\n                            changeHandler={this.changeHandler}\r\n                            signIn={this.signIn.bind(this)}\r\n                            errorMessage={this.state.errorMessage}\r\n                            remember={this.remember} />\r\n                        <CompanyRegistration/>\r\n                    </div>\r\n                }\r\n            </MarginDiv>\r\n        \r\n        );\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        users: state.appReducer.users,\r\n        companies: state.appReducer.companies,\r\n    }\r\n}\r\n\r\n\r\n\r\nexport default connect(mapStateToProps, null)(AutorizationCompany);\r\n\r\n"]},"metadata":{},"sourceType":"module"}